<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>年間カレンダー</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <header class="app-header">
      <h1>年間カレンダー</h1>
      <form id="yearForm" class="year-form">
        <label for="yearInput">年を選択:</label>
        <input type="number" id="yearInput" name="year" min="1" max="9999" step="1" />
        <button type="submit" class="year-form__submit">表示</button>
        <span aria-hidden="true" class="year-form__divider">|</span>
        <button type="button" id="yearChartTrigger" class="year-form__chart-button">
          年間推移
        </button>
        <p id="yearError" class="form-error" aria-live="polite"></p>
      </form>
    </header>

    <main>
      <section class="upload-placeholder" aria-labelledby="csvSectionTitle">
        <h2 id="csvSectionTitle">CSVファイルの指定</h2>
        <p class="upload-placeholder__description">
          デフォルトでは <code>docs/dummy.csv</code> を参照します。別のCSVを解析したい場合は、ファイル選択ボタンからアップロードしてください。
        </p>
        <div class="csv-upload">
          <input
            type="file"
            id="csvFileInput"
            class="csv-upload__input"
            accept=".csv,text/csv"
            aria-describedby="csvStatus csvError"
          />
          <label
            for="csvFileInput"
            class="csv-upload__trigger"
            role="button"
            tabindex="0"
            data-csv-trigger
          >
            CSVファイルを選択
          </label>
          <span id="csvFileName" class="csv-upload__filename" aria-live="polite">未選択</span>
          <button type="button" id="csvResetButton" class="csv-upload__reset">既定データに戻す</button>
        </div>
        <p id="csvStatus" class="csv-upload__status" aria-live="polite"></p>
        <p id="csvError" class="form-error" aria-live="polite"></p>
      </section>

      <section id="calendar" class="calendar-grid" aria-live="polite"></section>
    </main>

    <div
      id="monthModal"
      class="month-modal"
      aria-hidden="true"
      role="dialog"
      aria-label="月の拡大表示"
    >
      <div class="month-modal__backdrop" data-modal-close></div>
      <div class="month-modal__dialog">
        <button
          type="button"
          id="modalCloseButton"
          class="month-modal__close"
          aria-label="閉じる"
          data-modal-close
        >
          ×
        </button>
        <div id="modalCalendarContainer" class="month-modal__calendar"></div>
      </div>
    </div>

    <div
      id="yearChartModal"
      class="year-chart-modal"
      aria-hidden="true"
      role="dialog"
      aria-label="年間損益グラフ"
    >
      <div class="year-chart-modal__backdrop" data-year-chart-close></div>
      <div class="year-chart-modal__dialog">
        <button
          type="button"
          id="yearChartCloseButton"
          class="year-chart-modal__close"
          aria-label="閉じる"
          data-year-chart-close
        >
          ×
        </button>
        <div id="yearChartContainer" class="year-chart-modal__content"></div>
      </div>
    </div>

    <template id="monthTemplate">
      <article class="calendar-month">
        <header class="month-header"></header>
        <table>
          <caption class="month-caption"></caption>
          <thead>
            <tr class="weekday-row"></tr>
          </thead>
          <tbody class="weeks"></tbody>
        </table>
      </article>
    </template>

    <script src="/main.js" type="module"></script>
  </body>
</html>
